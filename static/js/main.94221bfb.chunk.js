(this.webpackJsonpfbase=this.webpackJsonpfbase||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(26),s=n.n(c),i=n(9),o=n.n(i),u=n(15),j=n(6),l=n(18),d=n(5),b=n(28),p=n(19);n(34),n(46),n(47);p.a.initializeApp({apiKey:"AIzaSyC1w7ynuRiNM84bvAdcjnebkjffc-qw60E",authDomain:"testjjj-14ea5.firebaseapp.com",projectId:"testjjj-14ea5",storageBucket:"testjjj-14ea5.appspot.com",messagingSenderId:"828418883319",appId:"1:828418883319:web:bc68aac75b3ede9bc95df2"});var f=p.a,h=p.a.auth(),O=p.a.firestore(),x=p.a.storage(),m=n(1);var g=function(e){var t=e.msgArr,n=e.self,a=Object(r.useState)(!1),c=Object(j.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),u=Object(j.a)(o,2),l=u[0],d=u[1];return Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{children:"".concat(t.userName," / ").concat(t.createAd)}),Object(m.jsx)("div",{children:"".concat(t.msg)}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:t.img,width:"50px",height:"50px"})}),n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(e){i((function(e){return!e})),console.log(t.id)},children:"edit"}),Object(m.jsx)("button",{onClick:function(e){window.confirm("delete?")&&O.doc("msg/".concat(t.id)).delete()},children:"del"})]}),s&&Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O.doc("msg/".concat(t.id)).update({msg:l}),i(!1)},children:[Object(m.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;d(t)},placeholder:t.msg,value:l}),Object(m.jsx)("button",{type:"submit",children:"ok"})]})})]})};var v=function(e){var t=e.user,n=Object(r.useState)(""),a=Object(j.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)([]),l=Object(j.a)(i,2),d=l[0],p=l[1],f=Object(r.useState)(""),h=Object(j.a)(f,2),v=h[0],w=h[1];Object(r.useEffect)((function(){O.collection("msg").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(b.a)({id:e.id},e.data())}));p(t)}))}),[]);var y=function(){var e=Object(u.a)(o.a.mark((function e(n){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.ref().child("".concat(t.uid,"/").concat(Math.random().toString(36).replace(".","")));case 3:return r=e.sent,e.next=6,r.putString(v,"data_url");case 6:return a=e.sent,e.next=9,a.ref.getDownloadURL();case 9:i=e.sent,O.collection("msg").add({createAd:(new Date).getFullYear(),createId:t.uid,userName:t.email,msg:c,img:i}),s("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:["Home",Object(m.jsxs)("form",{onSubmit:y,children:[Object(m.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;s(t)},value:c}),Object(m.jsx)("button",{type:"submit",children:"submit"})]}),Object(m.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;w(t)},n.readAsDataURL(t)}}),v&&Object(m.jsx)("img",{src:v,width:"50px",height:"50px"}),Object(m.jsx)("button",{onClick:function(){return w("")},children:"file del"}),Object(m.jsx)("br",{}),Object(m.jsx)("hr",{}),Object(m.jsx)("ul",{children:d.map((function(e){return Object(m.jsx)(g,{msgArr:e,self:t.uid===e.createId},e.id)}))})]})},w=function(e){var t=e.user,n=e.refrashUser,a=Object(r.useState)(t.displayName),c=Object(j.a)(a,2),s=c[0],i=c[1],l=Object(r.useState)("https://firebasestorage.googleapis.com/v0/b/testjjj-14ea5.appspot.com/o/4C95ZttFm9cyMD4FDtS3uhY4lsx2%2F0wqwi60jfqge?alt=media&token=c86fc6e2-19c0-4606-8b50-f276e595c89b"),b=Object(j.a)(l,2),p=b[0],f=b[1],g=Object(r.useState)(h.currentUser.photoURL),v=Object(j.a)(g,2),w=v[0],y=v[1],S=Object(d.f)(),k=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h.signOut();case 3:S.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.collection("msg").where("createId","==",t.uid).orderBy("createAd").get();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){U(),console.log("server",h.currentUser)}),[]);var C=function(){var e=Object(u.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t.updateProfile({displayName:s,photoURL:w});case 3:n(),console.log("client : ",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=e.target,n=t.value;switch(t.name){case"newName":i(n);break;case"photo":f(n);break;default:return!1}},A=function(){var e=Object(u.a)(o.a.mark((function e(n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.ref().child("".concat(t.uid,"/profile/").concat(Math.random().toString(30).replace(".","")));case 3:return r=e.sent,e.next=6,r.putString(p,"data_url");case 6:return a=e.sent,e.next=9,a.ref.getDownloadURL();case 9:c=e.sent,console.log(c),y(c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:["email: ",t.email,Object(m.jsx)("br",{}),Object(m.jsxs)("form",{onSubmit:C,children:[Object(m.jsx)("label",{htmlFor:"newName",children:"userName"}),Object(m.jsx)("input",{type:"text",id:"newName",name:"newName",value:s,onChange:N}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"photo",children:"userphoto"}),Object(m.jsx)("input",{type:"text",id:"photo",name:"photo",onChange:N}),Object(m.jsx)("button",{type:"submit",children:"submit"})]}),Object(m.jsx)(r.Fragment,{children:Object(m.jsxs)("form",{onSubmit:A,children:[Object(m.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;f(t)},n.readAsDataURL(t)}}),Object(m.jsx)("button",{type:"submit",children:"profile img upload"})]})}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:w,width:"50px"})}),Object(m.jsx)("form",{onSubmit:k,children:Object(m.jsx)("button",{type:"submit",children:"logout"})})]})};var y=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(j.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(""),b=Object(j.a)(d,2),p=b[0],x=b[1],g=Object(r.useState)(!1),v=Object(j.a)(g,2),w=v[0],y=v[1];console.log(w);var S=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?a(r):"password"===n&&l(r)},k=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!w){e.next=11;break}return e.next=5,h.createUserWithEmailAndPassword(n,i);case 5:return r=e.sent,console.log(r),e.next=9,O.collection("user1").add({a:"afsaasasd423424asddd",b:"\ud638asdasas242432424dasddasd\ud638",d:n,e:r.user.uid});case 9:e.next=14;break;case 11:return e.next=13,h.signInWithEmailAndPassword(n,i);case 13:r=e.sent;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),x(e.t0.message);case 20:y(!0);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{onSubmit:k,children:[Object(m.jsx)("input",{type:"email",value:n,onChange:S,name:"email"}),Object(m.jsx)("input",{type:"password",value:i,onChange:S,name:"password"}),Object(m.jsx)("input",{type:"submit",value:w?"create":"login"}),Object(m.jsx)("div",{onClick:function(e){y((function(e){return!e}))},children:w?"login":"create"})]}),Object(m.jsx)("button",{onClick:function(e){var t=new f.auth.GoogleAuthProvider;h.signInWithPopup(t)},children:"google login"}),Object(m.jsx)("div",{children:p})]})};var S=function(e){var t=e.user;return Object(m.jsxs)("div",{children:[Object(m.jsx)(l.b,{to:"/",children:"home asdasd"}),Object(m.jsx)(l.b,{to:"/profile",children:"".concat(t.displayName,"'s profile")}),Object(m.jsx)("hr",{})]})};var k=function(e){var t=e.isLogged,n=e.user,r=e.refrashUser;return Object(m.jsx)("div",{children:Object(m.jsx)(l.a,{children:Object(m.jsx)(d.c,{children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S,{user:n}),Object(m.jsx)(d.a,{exact:!0,path:"/",children:Object(m.jsx)(v,{user:n})}),Object(m.jsx)(d.a,{exact:!0,path:"/profile",children:Object(m.jsx)(w,{user:n,refrashUser:r})})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(d.a,{exact:!0,path:"/",children:Object(m.jsx)(y,{})})})})})})};var U=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(j.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)(),b=Object(j.a)(d,2),p=b[0],f=b[1];Object(r.useEffect)((function(){h.onAuthStateChanged((function(e){e?(a(!0),f({email:e.email,displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):a(!1),l(!0)}))}),[]);var O=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.currentUser;case 2:return n=e.sent,e.next=5,f({email:n.email,displayName:n.displayName,photoURL:n.photoURL,uid:n.uid,updateProfile:function(e){return n.updateProfile(e)}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:i?Object(m.jsx)(k,{isLogged:n,user:p,refrashUser:O}):"loading"})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(U,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.94221bfb.chunk.js.map