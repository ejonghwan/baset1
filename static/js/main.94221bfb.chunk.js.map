{"version":3,"sources":["fbase.js","components/List.js","pages/Home.js","pages/Profile.js","pages/Auth.js","components/Navi.js","components/MyRouter.js","components/App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","fb","authService","auth","dbService","firestore","storageService","storage","List","msgArr","self","useState","toggle","setToggle","editText","setEditText","userName","createAd","msg","src","img","width","height","onClick","e","prev","console","log","id","window","confirm","doc","delete","onSubmit","preventDefault","update","type","onChange","value","target","placeholder","Home","user","setMsg","setMsgArr","imgFile","setImgFild","useEffect","collection","onSnapshot","snap","data","docs","map","handleSubmit","a","ref","child","uid","Math","random","toString","replace","fileUrl","putString","res","getDownloadURL","imgUrl","add","Date","getFullYear","createId","email","accept","theFile","files","reader","FileReader","onloadend","result","currentTarget","readAsDataURL","Profile","refrashUser","displayName","newName","setNewName","photo","setPhoto","currentUser","photoURL","profileSrc","setProfileSrc","history","useHistory","handleLogoutSubmit","signOut","push","getMyInfo","where","orderBy","get","handleEditSubmit","updateProfile","handleChange","name","handleImageUploadSubmit","putData","profileImg","htmlFor","end","Auth","setEmail","password","setPassword","err","setErr","account","setAccount","createUserWithEmailAndPassword","b","d","signInWithEmailAndPassword","message","provider","GoogleAuthProvider","signInWithPopup","Navi","to","MyRouter","isLogged","exact","path","App","setIsLogged","init","setInit","setUser","onAuthStateChanged","args","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94221bfb.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTHDOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECTID,\r\n    storageBucket: process.env.REACT_APP_STORAGE,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGE,\r\n    appId: process.env.REACT_APP_APPID,\r\n};\r\n\r\n\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const fb = firebase;\r\nexport const authService = firebase.auth();\r\nexport const dbService = firebase.firestore();\r\nexport const storageService = firebase.storage();\r\n","import React, { useState } from 'react'\r\nimport { dbService } from 'fbase'\r\n\r\nfunction List({ msgArr, self }) {\r\n    // console.log(msgArr)\r\n\r\n    const [toggle, setToggle] = useState(false);\r\n    const [editText, setEditText] = useState('');\r\n\r\n    const handleDel = e => {\r\n        const ok = window.confirm('delete?')\r\n        if(ok) {\r\n          dbService.doc(`msg/${msgArr.id}`).delete();\r\n        }\r\n    }\r\n\r\n    const handleEditSubmit = e => {\r\n      e.preventDefault();\r\n      dbService.doc(`msg/${msgArr.id}`).update({\r\n        msg: editText,\r\n      });\r\n      setToggle(false)\r\n    }\r\n\r\n    const handleEdit = e => {\r\n        setToggle(prev => !prev)\r\n        console.log(msgArr.id)\r\n    }\r\n\r\n    const handleChange = e => {\r\n      const { target: { value } } = e\r\n      setEditText(value)\r\n    }\r\n    \r\n\r\n\r\n\r\n\r\n  return (\r\n    <li>\r\n        <div>{`${msgArr.userName} / ${msgArr.createAd}`}</div>\r\n        <div>{`${msgArr.msg}`}</div>\r\n        <div><img src={msgArr.img} width=\"50px\" height=\"50px\" /></div>\r\n        {self && (<>\r\n            <button onClick={handleEdit}>edit</button>\r\n            <button onClick={handleDel}>del</button>\r\n        </>)}\r\n        {toggle && (<>\r\n          <form onSubmit={handleEditSubmit}>\r\n            <input type=\"text\" onChange={handleChange} placeholder={msgArr.msg} value={editText} />\r\n            <button type=\"submit\">ok</button>\r\n          </form>\r\n        </>)}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default List;\r\n","import React, { useState, useEffect } from 'react'\r\nimport { dbService, storageService } from 'fbase'\r\nimport List from 'components/List'\r\n\r\nfunction Home({ user }) {\r\n\r\n  const [msg, setMsg] = useState('')\r\n  const [msgArr, setMsgArr] = useState([])\r\n  const [imgFile, setImgFild] = useState('')\r\n\r\n  const handleChange = e => {\r\n    const { target: { value } } = e;\r\n    setMsg(value)\r\n  }\r\n  // console.log(user)\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    dbService.collection('msg').onSnapshot(snap => {\r\n      const data = snap.docs.map( doc => {\r\n        return {\r\n          id: doc.id,\r\n          ...doc.data()\r\n        }\r\n      })\r\n      setMsgArr(data)\r\n    })\r\n  }, [])\r\n\r\n  const createRandomString = () => {\r\n    return Math.random().toString(36).replace(\".\", \"\")\r\n  }\r\n\r\n  // const ab = async () => {\r\n  //   const aa = await dbService.collection('msg').doc('K6dgaI3i0FUl522wBp6m').collection('ttt').doc('t').get()\r\n    // console.log(aa.data())\r\n  // }\r\n\r\n  // ab()\r\n  \r\n  \r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const fileUrl = await storageService.ref().child(`${user.uid}/${createRandomString()}`)\r\n    const res = await fileUrl.putString(imgFile, \"data_url\")\r\n    const imgUrl = await res.ref.getDownloadURL()\r\n    // console.log(imgUrl)\r\n    dbService.collection('msg').add({\r\n      createAd: new Date().getFullYear(),\r\n      createId: user.uid,\r\n      userName: user.email,\r\n      msg: msg,\r\n      img: imgUrl,\r\n    })\r\n    setMsg(\"\");\r\n  }\r\n\r\n  const handleFileChange = e => {\r\n    const { target: { files } } = e;\r\n    const theFile = files[0];\r\n    const reader = new FileReader();\r\n    // console.log(reader)\r\n    reader.onloadend = data => {\r\n      const { currentTarget: { result } } = data;\r\n      // console.log(data)\r\n      setImgFild(result)\r\n      // console.log(result)\r\n    }\r\n    \r\n    reader.readAsDataURL(theFile);\r\n  }\r\n\r\n  const handleFileDel = () => setImgFild(\"\");\r\n\r\n\r\n  return (\r\n    <div>\r\n      Home\r\n      <form onSubmit={handleSubmit}>\r\n        <input type=\"text\" onChange={handleChange} value={msg} />\r\n        <button type=\"submit\">submit</button>\r\n      </form>\r\n\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\r\n      {imgFile && <img src={imgFile} width=\"50px\" height=\"50px\"/>}\r\n      <button onClick={handleFileDel}>file del</button>\r\n      <br /><hr />\r\n      \r\n      <ul>\r\n        {msgArr.map(data => <List msgArr={data} key={data.id} self={user.uid === data.createId}/> )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React, { useState, useEffect, Fragment } from 'react'\r\nimport { authService, dbService, storageService } from 'fbase';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nconst Profile = ({ user, refrashUser }) => {\r\n\r\n  const [newName, setNewName] = useState(user.displayName)\r\n  const [photo, setPhoto] = useState('https://firebasestorage.googleapis.com/v0/b/testjjj-14ea5.appspot.com/o/4C95ZttFm9cyMD4FDtS3uhY4lsx2%2F0wqwi60jfqge?alt=media&token=c86fc6e2-19c0-4606-8b50-f276e595c89b')\r\n  const [profileSrc, setProfileSrc] = useState(authService.currentUser.photoURL)\r\n\r\n  const history = useHistory()\r\n\r\n  const handleLogoutSubmit = async e => {\r\n    e.preventDefault()\r\n    await authService.signOut()\r\n    history.push('/')\r\n  }\r\n\r\n  //filter\r\n  const getMyInfo = async () => {\r\n    const info = await dbService.collection(\"msg\")\r\n    .where(\"createId\", \"==\", user.uid)\r\n    .orderBy(\"createAd\")\r\n    .get()\r\n    // info.docs.map(item => console.log(item))\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    getMyInfo()\r\n    console.log('server', authService.currentUser)\r\n  }, [])\r\n\r\n  const handleEditSubmit = async e => {\r\n    e.preventDefault()\r\n    await user.updateProfile({\r\n      displayName: newName,\r\n      photoURL:profileSrc,\r\n    })\r\n    refrashUser()\r\n    console.log('client : ', user);\r\n  };\r\n\r\n  const handleChange = e => {\r\n    const { target: {value, name} } = e\r\n    switch(name) {\r\n      case 'newName' :\r\n        setNewName(value)\r\n        break\r\n\r\n      case 'photo' :\r\n        setPhoto(value)\r\n        break\r\n\r\n      default : return false \r\n    }\r\n  }\r\n\r\n  const randomName = () => {\r\n    return Math.random().toString(30).replace(\".\", \"\")\r\n  }\r\n  \r\n  const handleImageUploadSubmit = async e => {\r\n    e.preventDefault();\r\n    const child = await storageService.ref().child(`${user.uid}/profile/${randomName()}`);\r\n    const putData = await child.putString(photo, \"data_url\");\r\n    const profileImg = await putData.ref.getDownloadURL()\r\n    console.log(profileImg)\r\n    setProfileSrc(profileImg)\r\n\r\n  }\r\n\r\n\r\n  const handleImgChange = e => {\r\n    const { target: { files } } = e;\r\n    const theFile = files[0]\r\n    const reader = new FileReader();\r\n    reader.onloadend = end => {\r\n      const { currentTarget: { result } } = end\r\n      // console.log(result)\r\n      setPhoto(result)\r\n    }\r\n    reader.readAsDataURL(theFile)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      email: {user.email}<br />\r\n      <form onSubmit={handleEditSubmit}>\r\n        <label htmlFor=\"newName\">userName</label>\r\n        <input type=\"text\" id=\"newName\" name=\"newName\" value={newName} onChange={handleChange} /><br />\r\n        <label htmlFor=\"photo\">userphoto</label>\r\n        <input type=\"text\" id=\"photo\" name=\"photo\" onChange={handleChange} />\r\n        <button type=\"submit\">submit</button>\r\n      </form>\r\n      <Fragment>\r\n        <form onSubmit={handleImageUploadSubmit}>\r\n          <input type=\"file\" accept=\"image/*\" onChange={handleImgChange}/>\r\n          <button type=\"submit\">profile img upload</button>\r\n        </form>\r\n      </Fragment>\r\n      <div><img src={profileSrc} width=\"50px\"/></div>\r\n      <form onSubmit={handleLogoutSubmit}>\r\n        <button type=\"submit\">logout</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useState } from 'react'\r\nimport { authService, dbService, fb } from 'fbase'\r\n\r\nfunction Auth() {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [err, setErr] = useState('');\r\n    const [account, setAccount] = useState(false)\r\n   console.log(account)\r\n\r\n    const handleChange = e => {\r\n        const { target: {name, value} } = e\r\n        if(name === \"email\") {\r\n            setEmail(value)\r\n        } else if(name === \"password\") {\r\n            setPassword(value)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault()\r\n        let data;\r\n        try {\r\n            if(account) {\r\n                data = await authService.createUserWithEmailAndPassword(email, password)\r\n                console.log(data)\r\n                await dbService.collection(\"user1\").add({\r\n                    a: \"afsaasasd423424asddd\",\r\n                    b: \"호asdasas242432424dasddasd호\",\r\n                    d: email,\r\n                    e: data.user.uid\r\n                })\r\n                \r\n               \r\n            } else {\r\n                data = await authService.signInWithEmailAndPassword(email, password)\r\n            }\r\n           \r\n        } catch (err) {\r\n            console.log(err)\r\n            setErr(err.message)\r\n        }\r\n        setAccount(true)\r\n\r\n    }\r\n\r\n    const handleToggle = e => {\r\n        setAccount(prev => !prev)\r\n    }\r\n\r\n    const handleGoogleLogin = e => {\r\n        // authService.GoogleAuthProvider()\r\n        const provider = new fb.auth.GoogleAuthProvider()\r\n        authService.signInWithPopup(provider)\r\n\r\n    }\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n          <input \r\n            type=\"email\" \r\n            value={email}\r\n            onChange={handleChange}\r\n            name=\"email\" \r\n            /> \r\n        <input \r\n            type=\"password\" \r\n            value={password}\r\n            onChange={handleChange}\r\n            name=\"password\" \r\n            />\r\n        <input type=\"submit\" value={account ? \"create\" : \"login\"}/>\r\n        <div onClick={handleToggle}>{account ? \"login\" : \"create\"}</div>\r\n        \r\n      </form>\r\n\r\n      <button onClick={handleGoogleLogin}>google login</button>\r\n      <div>{err}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Navi({ user }) {\r\n  return (\r\n    <div>\r\n        <Link to=\"/\">home asdasd</Link>\r\n        <Link to=\"/profile\">{`${user.displayName}'s profile`}</Link>\r\n        <hr />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navi;\r\n","import React from 'react'\r\nimport {HashRouter as Router, Switch, Route, Redirect} from 'react-router-dom'\r\nimport Home from 'pages/Home'\r\nimport Profile from 'pages/Profile'\r\nimport Auth from 'pages/Auth'\r\nimport Navi from 'components/Navi'\r\n\r\nfunction MyRouter({ isLogged, user, refrashUser }) {\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Switch>\r\n          {isLogged ? (\r\n             <>\r\n             <Navi user={user}/>\r\n             <Route exact path=\"/\">\r\n               <Home user={user}/>\r\n             </Route>\r\n             <Route exact path=\"/profile\">\r\n               <Profile user={user} refrashUser={refrashUser}/>\r\n             </Route>\r\n           </>\r\n          ) : (\r\n            <>\r\n              <Route exact path=\"/\">\r\n                <Auth />\r\n              </Route>\r\n            </>\r\n          )}\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MyRouter;\r\n","import React, { useState, useEffect } from 'react'\nimport MyRouter from './MyRouter'\nimport { authService } from 'fbase'\n\nfunction App() {\n\n  const [isLogged, setIsLogged] = useState(false);\n  const [init, setInit] = useState(false);\n  const [user, setUser] = useState();\n  \n\n\n  useEffect( () => {\n    authService.onAuthStateChanged((user) => { //비동기함수\n      // 비동기 실행\n      if(user) {\n        setIsLogged(true)\n        // setUser(user)\n        setUser({\n          email: user.email,\n          displayName: user.displayName,\n          photoURL: user.photoURL,\n          uid: user.uid,\n          updateProfile: (args) => user.updateProfile(args)\n        })\n        // 깊은 복사안됨\n        // setUser(JSON.parse(JSON.stringify(authService.currentUser)))\n        // 스프레드 복사안됨\n        // setUser({...authService.currentUser})\n      } else {\n        setIsLogged(false)\n      };\n      setInit(true)\n    })\n  }, [])\n\n\n  // const refrashUser = async e => await setUser({...authService.currentUser})\n  // const refrashUser = async e => {\n    // await setUser(JSON.parse(JSON.stringify(authService.currentUser)))\n    // await setUser({...authService.currentUser})\n    // let test = await JSON.parse(JSON.stringify(authService.currentUser))\n    // let test = await {...authService.currentUser}\n    // console.log('client : ', test)\n  // }\n  const refrashUser = async e => {\n    const user = await authService.currentUser\n    await setUser({\n      email: user.email,\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      uid: user.uid,\n      updateProfile: (args) => user.updateProfile(args)\n    }) \n  }\n  \n\n  return (\n    <div>\n      { init ? <MyRouter isLogged={isLogged} user={user} refrashUser={refrashUser}/> : \"loading\" }\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'components/App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}